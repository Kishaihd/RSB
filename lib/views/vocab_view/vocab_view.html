<div class="wrapper">
    <div class="menuButtons">
        <span class="menu-left">
            <material-dropdown-select iconName="more_horiz" slide="x" class="menu-vocab-drop">
                <div *ngFor="let view of views; let i=index">
                    <material-select-item (trigger)="changeVocabView(i)" class="menu-vocab-item">
                        {{view}}
                    </material-select-item>
                </div>
            </material-dropdown-select>
        </span>
        <span class="menu-right">
            <material-button id="lockunlock" *ngIf="currentView == views[0]" icon (click)="changeEditMode()">
                <material-icon *ngIf="editMode == true" icon="lock_open"></material-icon>
                <material-icon *ngIf="editMode == false" icon="lock_outline"></material-icon>
            </material-button>
            <material-button *ngIf="currentView == views[1]" icon (click)="changeListWordView()">
                <material-icon icon="swap_horiz"></material-icon>
            </material-button>
            <material-button *ngIf="currentView == views[1] && defVisible == false" checked="true" icon
                             (click)="changeListView()">
                <material-icon icon="visibility_off"></material-icon>
            </material-button>
            <material-button *ngIf="currentView == views[1] && defVisible == true" checked="false" icon
                             (click)="changeListView()">
                <material-icon icon="visibility"></material-icon>
            </material-button>
            <material-button *ngIf="currentView == views[2]" icon (click)="changeCardView()">
                <material-icon icon="view_carousel"></material-icon>
            </material-button>
        </span>
    </div>


    <div *ngIf="currentView == views[0]">
        <span id="word-input">
            <material-input label="Add word!"
                            [disabled]="editMode == true"
                            autoFocus floatingLabel style="width:40%"
                            [(ngModel)]="wordName">
            </material-input>
            <material-input label="Add definition"
                            [disabled]="editMode == true"
                            floatingLabel style="width:40%"
                            [(ngModel)]="wordDef">
            </material-input>
            <material-button
                    (trigger)="addQuick(wordName, wordDef); wordName = wordDef = '';"
                    [class.hidden]="panelOpen == true"
                    [hidden]="panelOpen == true"
                    [disabled]="wordName == null || wordName.isEmpty">
                <material-icon icon="add_box"></material-icon>
            </material-button>
            <!--<material-expansionpanel flat name="Add more word data" (save)="addFull(newName, newDef, cat, subcat, type, example)">-->
        </span>
        <span>
            <material-expansionpanel flat name="Add more word data" (open)="panelOpen = true" (close)="panelOpen = false" (save)="addFull(getWord(), getDef(), getCat(), getSubcat(), getType(), getExample())">
                <div>
                    Word type: <material-dropdown-select [buttonText]="getType()" slide="y">
                        <div *ngFor="let t of wordTypes">
                            <material-select-item (trigger)="wordType = t" class="dropdown-thing">
                                {{t}}
                            </material-select-item>
                        </div>
                    </material-dropdown-select>
                </div>
                <div>
                    Category: <material-dropdown-select [buttonText]="getCat()" slide="y">
                        <div *ngFor="let c of categories">
                            <material-select-item (trigger)="wordCat = c" class="dropdown-thing">
                                <!--class="wordInfo"-->
                                {{c}}
                            </material-select-item>
                        </div>
                    </material-dropdown-select>
                </div>
                <div *ngIf="wordCat != ''">
                    Subcategory: <material-dropdown-select *ngIf="wordCat != ''" [buttonText]="getSubcat()" slide="y">
                        <div *ngFor="let sc of subcategories">
                            <material-select-item class="dropdown-thing" (trigger)="wordSubcat = sc">
                                 <!--class="wordInfo"-->
                                {{sc}}
                            </material-select-item>
                        </div>
                    </material-dropdown-select>
                </div>
                <div *ngIf="wordCat == ''">
                        Subcategory: __
                </div>
                <div>
                    <material-input label="Example use: "
                                    floatingLabel style="width:40%"
                                    [(ngModel)]="wordExample">
                    </material-input>
                </div>
            </material-expansionpanel>
        </span>


        <p *ngIf="masterVocabList[fbService.currentLanguage] == null || masterVocabList[fbService.currentLanguage].isEmpty">
            Vocabulary words will show up here. :)
        </p>

        <div *ngIf="masterVocabList[fbService.currentLanguage] != null && masterVocabList[fbService.currentLanguage].isNotEmpty">
            <hr>
            <hr>
            <material-expansionpanel-set *ngFor="let word of masterVocabList[fbService.currentLanguage]; let i=index">
                <material-expansionpanel flat (save)="updateWord(word)" name="{{word.wordName}}" secondaryText="{{word.definition}}">
                    <span class="wordAndDef">
                        <span>
                            <div *ngIf="editWordInfo == true" class="wordInfoMem">
                                Memorized: {{word.isMemorized}}
                            </div>
                            <div *ngIf="editWordInfo == false" class="wordInfo">
                                Memorized: {{word.isMemorized}}
                            </div>
                            <div *ngIf="editWordInfo == true" class="wordInfo">
                                Word type: <material-dropdown-select [buttonText]="word.getWordType()" slide="y">
                                    <div *ngFor="let type of wordTypes">
                                        <material-select-item (trigger)="word.setWordType(type)" class="wordInfo">
                                            {{type}}
                                        </material-select-item>
                                    </div>
                                </material-dropdown-select>
                            </div>
                            <div *ngIf="editWordInfo == false" class="wordInfo">
                                Word type: {{word.getWordType()}}
                            </div>

                            <div *ngIf="editWordInfo == true" class="wordInfo">
                                Category: <material-dropdown-select [buttonText]="word.getCategory()" slide="y">
                                    <div *ngFor="let cat of categories">
                                        <material-select-item (trigger)="word.setCategory(cat)"  class="wordInfo">
                                            {{cat}}
                                        </material-select-item>
                                    </div>
                                </material-dropdown-select>
                            </div>
                            <div *ngIf="editWordInfo == false" class="wordInfo">
                                Category: {{word.getCategory()}}
                            </div>
                            <div *ngIf="editWordInfo == true" class="wordInfo">
                                Sub-category: <material-dropdown-select [buttonText]="word.getSubcategory()" slide="y">
                                    <div *ngIf="word?.getCategory() == null || word.getCategory() == '' || word.getCategory() == 'unspecified'" class="wordInfo">
                                        {{word.getSubcategory()}}
                                    </div>
                                    <div *ngIf="word?.getCategory() != null && word.getCategory() != '' && word.getCategory() != 'unspecified'">
                                        <div *ngFor="let subcat of subcategories">
                                            <material-select-item (trigger)="word.setSubcategory(subcat)"  class="wordInfo">
                                                {{subcat}}
                                            </material-select-item>
                                        </div>
                                    </div>
                                </material-dropdown-select>
                                <!--</span>-->
                            </div>
                            <div *ngIf="editWordInfo == false" class="wordInfo">
                                Sub-category: {{word.getSubcategory()}}
                                <!--</span>-->
                            </div>
                            <div *ngIf="editWordInfo == true" class="wordInfo">
                                Examples: <material-input [(ngModel)]="example"></material-input>
                            </div>
                            <div *ngIf="editWordInfo == false" class="wordInfo">
                                Examples: <div *ngFor="let ex of word.examples">{{ex}}</div>
                            </div>
                        </span>
                        <span>
                            <material-button (trigger)="editWordMode()">
                                <material-icon icon="mode_edit"></material-icon>
                            </material-button>
                        </span>
                    <!--<span [class.odd-row]="i % 2 == 1" class="wordAndDef">-->
                        <!--<span [class.done]="done.checked" class="word"> {{word.wordName}} </span>-->
                        <!--<span [class.done]="done.checked" class="def"> {{word.definition}} </span>-->
                    <!--</span>-->
                    </span>
                </material-expansionpanel>
                <material-button *ngIf="editMode == true" class="li-remove" (trigger)="remove(word)">
                    <material-icon class="delete-icon" icon="delete"></material-icon>
                </material-button>
            </material-expansionpanel-set>
        </div>
    </div>

    <div *ngIf="currentView == views[1]" class="wordListView">
        <div *ngIf="listOrderWordFirst == true">
            <ol *ngFor="let word of masterVocabList[fbService.currentLanguage]; let i=index" class="wordList">
                <li [class.odd-row]="i % 2 == 1" class='list-div'>
                    <span>
                        <material-checkbox #done
                                           materialTooltip="Mark word as memorized">
                        </material-checkbox>
                    </span>
                    <span class="list-div">
                        <span [class.done]="done.checked"  class="word">
                            {{word.wordName}}
                        </span>
                        <span *ngIf="defVisible == true" [class.done]="done.checked" class="def">
                                {{word.definition}}
                        </span>
                    </span>
                </li>
            </ol>
        </div>

        <div *ngIf="listOrderWordFirst == false" class="wordListView">
            <ol *ngFor="let word of masterVocabList[fbService.currentLanguage]; let i=index" class="wordList">
                <li [class.odd-row]="i % 2 == 1" class='list-div'>
                    <span>
                        <material-checkbox #done
                                           materialTooltip="Mark word as memorized">
                        </material-checkbox>
                    </span>
                    <span class="list-div">
                        <span [class.done]="done.checked" class="def">
                            {{word.definition}}
                        </span>
                        <span *ngIf="defVisible == true" [class.done]="done.checked" class="word">
                                {{word.wordName}}
                        </span>
                    </span>
                </li>
            </ol>
        </div>
    </div>

    <div *ngIf="currentView == views[2]" class="fit layout vertical center-center">
        <hr>
        <div>
            <div class="card-flow">
                <div class="card-change-btn">
                    <material-button class="mbtn" icon (trigger)="previousCard()">
                        <material-icon icon="keyboard_arrow_left"></material-icon>
                    </material-button>
                </div>
                <div class="card">
                    <div *ngIf="showingWord == true && cardOrderWordFirst == true">
                        <material-button clear-size class="front"
                                         (trigger)="cardClick()">
                            {{vocabList[cardIndex].wordName}}
                        </material-button>
                    </div>
                    <div *ngIf="showingWord == false && cardOrderWordFirst == true">
                        <material-button clear-size class="back"
                                         (trigger)="cardClick()">
                            {{vocabList[cardIndex].definition}}
                        </material-button>
                    </div>

                    <div *ngIf="showingWord == true && cardOrderWordFirst == false">
                        <material-button clear-size class="front"
                                         (trigger)="cardClick()">
                            {{vocabList[cardIndex].definition}}
                        </material-button>
                    </div>
                    <div *ngIf="showingWord == false && cardOrderWordFirst == false">
                        <material-button clear-size class="back"
                                         (trigger)="cardClick()">
                            {{vocabList[cardIndex].wordName}}
                        </material-button>
                    </div>
                </div>
                <div class="card-change-btn">
                    <material-button class="mbtn" icon (trigger)="nextCard()">
                        <material-icon icon="keyboard_arrow_right"></material-icon>
                    </material-button>
                </div>
            </div>
        </div>
    </div>
</div>